#!/bin/bash

set -e

GAMEDIR=$SNAP_USER_COMMON/saves_and_config
FLAGDIR=$SNAP_USER_DATA/flags
if [ ! -d $GAMEDIR ];
then
  echo "Game directory doesn't exist"
  echo "Creating directory"
  mkdir -p $GAMEDIR
  mkdir -p $FLAGDIR
  touch $FLAGDIR/accept_incompatible_saves
else
  if [ ! -f $FLAGDIR/accept_incompatible_saves ]
  then
    guiluurve regression
    mkdir -p $FLAGDIR
    touch $FLAGDIR/accept_incompatible_saves
  fi
fi

cd ${SNAP}/share/games/doom
${SNAP}/bin/gzdoom -iwad ${SNAP}/wolf_boa.pk3 -config ${GAMEDIR}/boa.conf -savedir ${GAMEDIR}
